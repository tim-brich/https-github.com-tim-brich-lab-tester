# Lab Tester ‚Äî –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ (—Å –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π —á–µ—Ä–µ–∑ Cloudpub)

---

## üß† –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

**Lab Tester** ‚Äî —ç—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã—Ö —Ä–∞–±–æ—Ç –ø–æ C++:

- –°—Ç—É–¥–µ–Ω—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç `.cpp` —á–µ—Ä–µ–∑ –≤–µ–±-—Ñ–æ—Ä–º—É.
- –ö–æ–¥ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –∏ –ø—Ä–æ–≥–æ–Ω—è–µ—Ç—Å—è –ø–æ —Ç–µ—Å—Ç–∞–º –≤ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–º Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ.
- –°–∏—Å—Ç–µ–º–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç—á—ë—Ç:
  ```
  [COMPILATION SUCCESS]
  [TEST 1] Passed
  ‚Ä¶
  [SUMMARY] n / m tests passed
  ```
- –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –±–µ–∑–æ–ø–∞—Å–Ω–∞: —Å–µ—Ç—å –æ—Ç–∫–ª—é—á–µ–Ω–∞, –ø–∞–º—è—Ç—å –∏ CPU –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã, —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ read-only (–∫—Ä–æ–º–µ `/w`).

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
lab-tester/
‚îú‚îÄ‚îÄ app.py                  ‚Üê Flask-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ runner.py               ‚Üê –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
‚îú‚îÄ‚îÄ queue_worker.py         ‚Üê –û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á (–≤–æ—Ä–∫–µ—Ä—ã)
‚îú‚îÄ‚îÄ checker.cpp             ‚Üê –£—Ç–∏–ª–∏—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏
‚îú‚îÄ‚îÄ Dockerfile              ‚Üê Docker-–æ–±—Ä–∞–∑ —Å checker
‚îú‚îÄ‚îÄ requirements.txt        ‚Üê –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (Flask)
‚îÇ
‚îú‚îÄ‚îÄ tests/                  ‚Üê –¢–µ—Å—Ç—ã (–ø–æ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–º)
‚îÇ   ‚îî‚îÄ‚îÄ lab1/
‚îÇ       ‚îú‚îÄ‚îÄ input1.txt
‚îÇ       ‚îî‚îÄ‚îÄ output1.txt
‚îú‚îÄ‚îÄ uploads/                ‚Üê –ê–≤—Ç–æ—Å–æ–∑–¥–∞—ë—Ç—Å—è (–≤—Ä–µ–º–µ–Ω–Ω—ã–µ .cpp)
‚îî‚îÄ‚îÄ results/                ‚Üê –ê–≤—Ç–æ—Å–æ–∑–¥–∞—ë—Ç—Å—è (–æ—Ç—á—ë—Ç—ã, –∫–æ–ø–∏–∏ –∫–æ–¥–∞)
```

---

## ‚öôÔ∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç           | –í–µ—Ä—Å–∏—è     | –ü—Ä–æ–≤–µ—Ä–∫–∞                        |
|---------------------|------------|---------------------------------|
| Windows             | 10 / 11    |                                 |
| Python              | ‚â• 3.8      | `python --version`              |
| Docker Desktop      | ‚â• 4.x      | `docker --version`              |
| Git                 | –ª—é–±–æ–π      | `git --version`                 |
| Cloudpub            | –∞–∫–∫–∞—É–Ω—Ç    | cloudpub.ru                     |

---

## üì¶ –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

```cmd
cd C:\
git clone https://github.com/tim-brich/https-github.com-tim-brich-lab-tester.git lab-tester
cd lab-tester
```

---

## üêç –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Python-–æ–∫—Ä—É–∂–µ–Ω–∏—è

```cmd
python -m venv venv
venv\Scripts\activate.bat
pip install -r requirements.txt
```

---

## üê≥ –°–±–æ—Ä–∫–∞ Docker-–æ–±—Ä–∞–∑–∞

```cmd
docker build -t autotester_project-sandbox .
```

–û–∂–∏–¥–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ `Successfully tagged autotester_project-sandbox`.

---

## üìÇ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ Docker –∫ –¥–∏—Å–∫—É

```cmd
docker run --rm -v %cd%:/data ubuntu cmd /C "dir /data"
```

–ï—Å–ª–∏ –≤—Å–ø–ª—ã–≤—ë—Ç –æ–∫–Ω–æ **File Sharing**, –Ω–∞–∂–º–∏—Ç–µ **Share**.

---

## üöÄ –ó–∞–ø—É—Å–∫ Flask-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```cmd
python app.py
```

–í –∫–æ–Ω—Å–æ–ª–∏ –ø–æ—è–≤–∏—Ç—Å—è:
```
Running on http://127.0.0.1:5000/
```

---

## üåê –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä

1. –û—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:5000`
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É:
   - `Student name`: –ª—é–±–æ–µ
   - `Lab ID`: `lab1`
   - –ó–∞–≥—Ä—É–∑–∏—Ç–µ `.cpp`, –Ω–∞–ø—Ä–∏–º–µ—Ä:
     ```cpp
     #include <iostream>
     using namespace std;
     int main() {
         int x;
         cin >> x;
         cout << x * 2 << endl;
         return 0;
     }
     ```
3. –ù–∞–∂–º–∏—Ç–µ **Submit**  
4. –í–∞—Å –ø–µ—Ä–µ–∫–∏–Ω–µ—Ç –Ω–∞ `/job/<job_id>`  
   –ß–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥ –ø–æ—è–≤–∏—Ç—Å—è:
   ```
   [COMPILATION SUCCESS]
   [TEST 1] Passed
   [SUMMARY] 1 / 1 tests passed
   ```

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

1. –í `runner.py` –≤—Ä–µ–º–µ–Ω–Ω–æ —É–¥–∞–ª–∏—Ç–µ `"--rm",`
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ —Ç–µ—Å—Ç
3. –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–æ–≤–æ–µ –æ–∫–Ω–æ CMD:

```cmd
docker ps -a
docker inspect <ID> | findstr /C:"Memory" /C:"NanoCpus" /C:"PidsLimit"
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
- Memory: `268435456` (256 MB)
- NanoCpus: `500000000` (0.5 CPU)
- PidsLimit: `128`

4. –í–µ—Ä–Ω–∏—Ç–µ `"--rm",` –æ–±—Ä–∞—Ç–Ω–æ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Flask

---

## üõ† –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

–í `runner.py`:

```python
MEM_LIMIT  = "256m"
CPU_LIMIT  = "0.5"
PIDS_LIMIT = "128"
TIMEOUT    = 20
```

–¢–∞–∫–∂–µ:

```python
"--tmpfs", "/w:rw,exec,size=64m",
```

–ò–∑–º–µ–Ω–∏—Ç–µ ‚Üí —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ ‚Üí –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ `python app.py`.  
Docker-–æ–±—Ä–∞–∑ –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞—Ç—å **–Ω–µ –Ω—É–∂–Ω–æ**.

---

## üåç –ü—É–±–ª–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ Cloudpub

> Cloudpub –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–∫—Ä—ã—Ç—å `localhost:5000` –ø–æ HTTPS-–¥–æ–º–µ–Ω—É –±–µ–∑ –ø—Ä–æ–±—Ä–æ—Å–∞ –ø–æ—Ä—Ç–æ–≤.

### üîê –®–∞–≥ 1 ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [https://cloudpub.ru](https://cloudpub.ru)
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å
3. –°–æ–∑–¥–∞–π—Ç–µ —Ç—É–Ω–Ω–µ–ª—å:  
   - –ù–∞–∑–≤–∞–Ω–∏–µ: `lab-tester`
   - –ü–æ—Ä—Ç: `5000`
   - –ü—Ä–æ—Ç–æ–∫–æ–ª: `HTTP`
   - –ö–∞—Ç–µ–≥–æ—Ä–∏—è: `Flask`
   - –ù–∞–∑–Ω–∞—á—å—Ç–µ –ª—é–±–æ–π –ø—É–±–ª–∏—á–Ω—ã–π –ø–æ–¥–¥–æ–º–µ–Ω

### üåê –®–∞–≥ 2 ‚Äî –∑–∞–ø—É—Å–∫ —Ç—É–Ω–Ω–µ–ª—è

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∞–≥–µ–Ω—Ç Cloudpub:  
   [https://cloudpub.ru/install](https://cloudpub.ru/install)

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –µ–≥–æ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–ª–∏ –≤—Ä—É—á–Ω—É—é)

3. –í –ø–∞–Ω–µ–ª–∏ Cloudpub –Ω–∞–∂–º–∏—Ç–µ ¬´–ü–æ–¥–∫–ª—é—á–∏—Ç—å¬ª –∫ –≤–∞—à–µ–º—É —Ç—É–Ω–Ω–µ–ª—é  
   ‚Üí –ø–æ—è–≤–∏—Ç—Å—è —Å—Ç–∞—Ç—É—Å **"online"**

4. –û—Ç–∫—Ä–æ–π—Ç–µ `https://<your-subdomain>.cloudpub.ru`  
   ‚Äî –≤—ã —É–≤–∏–¥–∏—Ç–µ –≤–µ–±-—Ñ–æ—Ä–º—É –∞–≤—Ç–æ—Ç–µ—Å—Ç–µ—Ä–∞

> –¢–µ–ø–µ—Ä—å —Å—Ç—É–¥–µ–Ω—Ç–∞–º –Ω–µ –Ω—É–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏.  
> –í—ã –º–æ–∂–µ—Ç–µ –æ—Å—Ç–∞–≤–∏—Ç—å Flask-—Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω–Ω—ã–º –ª–æ–∫–∞–ª—å–Ω–æ ‚Äî Cloudpub –±—É–¥–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã.

---

## üßØ –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏ –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏—è

| –û—à–∏–±–∫–∞                                 | –ü—Ä–∏—á–∏–Ω–∞                                   | –†–µ—à–µ–Ω–∏–µ                                                        |
|----------------------------------------|-------------------------------------------|----------------------------------------------------------------|
| `compile_errors.txt: Read-only FS`     | checker –ø–∏—à–µ—Ç –≤ –∫–æ—Ä–µ–Ω—å                    | –£–±–µ–¥–∏—Ç–µ—Å—å: `--tmpfs /w:rw,exec,size=64m`, `-w /w`              |
| `student_program.exe: not found`       | –Ω–µ—Ç `./` –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ                      | –í `checker.cpp`: `./` –ø–µ—Ä–µ–¥ `exe_path`                         |
| `Permission denied`                    | tmpfs –±–µ–∑ exec                            | –í `runner.py`: `--tmpfs /w:rw,exec,size=64m`                   |
| `Failed at line 1` –ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –≤—ã–≤–æ–¥–µ | CRLF –≤ —ç—Ç–∞–ª–æ–Ω–∞—Ö                          | –í `checker.cpp` —É–∂–µ —É–¥–∞–ª—è–µ—Ç—Å—è `\r`                             |
| –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≤–∏—Å–∞–µ—Ç –Ω–∞ RUNNING           | –∑–∞–¥–∞—á–∞ –∑–∞–≤–∏—Å–ª–∞ –∏–ª–∏ –Ω–µ —Å—Ç–∞—Ä—Ç–æ–≤–∞–ª–∞          | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `runner.py`, —É–≤–µ–ª–∏—á—å—Ç–µ `TIMEOUT`, —Å–º–æ—Ç—Ä–∏—Ç–µ –∫–æ–Ω—Å–æ–ª—å  |

---

## ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ

–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ:
- –†–∞–±–æ—Ç–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É `http://localhost:5000`
- –ü–æ–¥–∫–ª—é—á–∞—Ç—å Cloudpub –∏ –ø—Ä–∏–Ω–∏–º–∞—Ç—å `.cpp` –æ—Ç —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ –∏–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏

üéâ –£–¥–∞—á–∏!
